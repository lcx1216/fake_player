{"version":3,"file":"js/SearchView.863c24fb.js","mappings":"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","sources":["webpack://wyym/./src/views/SearchView.vue?e8fe","webpack://wyym/./src/views/SearchView.vue","webpack://wyym/./src/views/SearchView.vue?dbc1"],"sourcesContent":["import { createElementVNode as _createElementVNode, withKeys as _withKeys, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"searchTop\"\n};\nconst _hoisted_2 = {\n  class: \"searchHistory\"\n};\nconst _hoisted_3 = {\n  class: \"historyLeft\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"history\"\n}, \"历史\", -1);\n\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"music\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  class: \"serial\"\n};\nconst _hoisted_9 = {\n  class: \"nametop\"\n};\nconst _hoisted_10 = {\n  class: \"name van-ellipsis\"\n};\nconst _hoisted_11 = {\n  class: \"anthor van-ellipsis\"\n};\nconst _hoisted_12 = {\n  class: \"musicright\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"iconfont icon-shipin\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"iconfont icon-31liebiao\"\n}, null, -1);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"i\", {\n    class: \"iconfont icon-zuojiantou\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.go(-1))\n  }), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"\",\n    id: \"\",\n    placeholder: \"陈奕迅\",\n    onKeydown: _cache[1] || (_cache[1] = _withKeys((...args) => $options.enterkey && $options.enterkey(...args), [\"enter\"])),\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.searchKey = $event)\n  }, null, 544), [[_vModelText, $data.searchKey]])]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.keyList, item => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      class: \"historyName\",\n      key: \"item\",\n      onClick: $event => $options.searchHis(item)\n    }, _toDisplayString(item), 9, _hoisted_5);\n  }), 128))]), _createElementVNode(\"i\", {\n    class: \"iconfont icon-icon\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.delHistory && $options.delHistory(...args))\n  })]), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.searchList, (item, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"singleMusic\",\n      key: i\n    }, [_createElementVNode(\"div\", {\n      class: \"mucisname\",\n      onClick: $event => $options.pushMusic(item)\n    }, [_createElementVNode(\"div\", _hoisted_8, _toDisplayString(i + 1), 1), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(item.name), 1), _createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.artists, (item1, index) => {\n      return _openBlock(), _createElementBlock(\"span\", {\n        key: index\n      }, _toDisplayString(item1.name), 1);\n    }), 128))])])], 8, _hoisted_7), _createElementVNode(\"div\", _hoisted_12, [item.mvid != 0 ? (_openBlock(), _createElementBlock(\"i\", _hoisted_13)) : _createCommentVNode(\"\", true), _hoisted_14])]);\n  }), 128))])], 64);\n}","import { getSearch } from \"@/request/api/home.js\";\nimport { mapMutations, mapState } from 'vuex';\nexport default {\n  data() {\n    return {\n      keyList: [],\n      searchKey: \"\",\n      searchList: []\n    };\n  },\n\n  computed: { ...mapState([\"playList\"])\n  },\n\n  mounted() {\n    this.keyList = JSON.parse(localStorage.getItem(\"keyList\")) ? JSON.parse(localStorage.getItem(\"keyList\")) : []; //当数组被清除后无法进行unshift操作，若无数组则赋值为[]\n  },\n\n  methods: {\n    enterkey: async function () {\n      if (this.searchKey !== \" \") {\n        this.keyList.unshift(this.searchKey); //放数组的最前面\n\n        this.keyList = [...new Set(this.keyList)]; //去重\n        //固定历史的长度 不超过8\n\n        if (this.keyList.length > 8) {\n          this.keyList.splice(this.keyList.length - 1, 1);\n        }\n\n        localStorage.setItem(\"keyList\", JSON.stringify(this.keyList)); //刷新后还保留\n\n        let res = await getSearch(this.searchKey);\n        console.log(res);\n        this.searchList = res.data.result.songs;\n        this.searchKey = \"\";\n      }\n    },\n    delHistory: function () {\n      localStorage.removeItem(\"keyList\");\n      this.keyList = [];\n    },\n    searchHis: async function (item) {\n      let res = await getSearch(item);\n      console.log(res);\n      this.searchList = res.data.result.songs;\n    },\n    pushMusic: function (item) {\n      item.al = item.album;\n      item.al.picUrl = item.album.artist.img1v1Url;\n      this.$store.commit(\"pushPlayList\", item);\n      this.$store.commit(\"updateMusicListIndex\", this.$store.state.playList.length - 1);\n    },\n    ...mapMutations([\"pushPlayList\", \"updateMusicListIndex\"])\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./SearchView.vue?vue&type=template&id=b796d228\"\nimport script from \"./SearchView.vue?vue&type=script&lang=js\"\nexport * from \"./SearchView.vue?vue&type=script&lang=js\"\n\nimport \"./SearchView.vue?vue&type=style&index=0&id=b796d228&lang=less\"\n\nimport exportComponent from \"E:\\\\项目\\\\2022Project_practi\\\\2022VUE\\\\CloudMusic\\\\wyym\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","key","_hoisted_14","render","_ctx","_cache","$props","$setup","$data","$options","onClick","$event","$router","go","type","name","id","placeholder","onKeydown","args","enterkey","searchKey","keyList","item","searchHis","delHistory","searchList","i","pushMusic","artists","item1","index","mvid","data","computed","mounted","this","JSON","parse","localStorage","getItem","methods","async","unshift","Set","length","splice","setItem","stringify","res","console","log","result","songs","removeItem","al","album","picUrl","artist","img1v1Url","$store","commit","state","playList","__exports__"],"sourceRoot":""}